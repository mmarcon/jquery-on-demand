(function(e){var c={fn2script:function(a){return a+"-ondemand.js"},jqueryPlugin:!1},f,b,g,i,d;f=function(a){this.options=e.extend({},c,a);this._defaults=c;this._name="onDemand";this._version="0.1";this._proxy={};d=this};b=f.prototype;b.fn2script=function(a){return this.options.fn2script(a)};b.firstLoad=function(a,j,b){var c=this.fn2script(a),h=e.Deferred(),f;if(g(d._proxy[a]))f=d._proxy[a].apply(b,j),h.resolve(f);else{if(!c)return;e.getScript(c).done(function(){var c;g(d._proxy[a])?c=d._proxy[a].apply(b,
j):i(d._proxy[a])?c=d._proxy[a]:d.options.jqueryPlugin&&(c=e.fn[a].apply(b,j));h.resolve(c)}).fail(function(){h.reject("OnDemand failed to load script "+c)})}return h.promise()};b.internalPreload=function(a){var b=this.fn2script(a);g(d._proxy[a])||b&&e.getScript(b)};b.setOptions=function(a){this.options=e.extend({},c,a)};b.resetOptions=function(){this.options=e.extend({},c,{})};b.preload=function(a){this.internalPreload(a)};b.invoke=function(a,b,c){return this.firstLoad(a,b,c)};b.use=function(a){return this.firstLoad(a)};
b.register=function(a,b){if(g(b)||i(b))d._proxy[a]=b};b.registerAll=function(a){for(var b in a)a.hasOwnProperty(b)&&this.register(b,a[b])};b.hasSize=function(){e.noop()};g=function(a){return"function"===typeof a};i=function(a){return"object"===typeof a};e.onDemand=new f(void 0)})(jQuery,window);
