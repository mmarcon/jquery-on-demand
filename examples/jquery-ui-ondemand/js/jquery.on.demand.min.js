(function(e){var c={fn2script:function(a){return a+"-ondemand.js"},jqueryPlugin:!1},f,b,g,i,d;f=function(a){this.options=e.extend({},c,a);this._defaults=c;this._name="onDemand";this._version="0.1";this._proxy={};this.options.jqueryPlugin&&(this._proxy=e.fn);d=this};b=f.prototype;b.fn2script=function(a){return this.options.fn2script(a)};b.firstLoad=function(a,j,b){var c=this.fn2script(a),h=e.Deferred(),f;if(g(d._proxy[a]))f=d._proxy[a].apply(b,j),h.resolve(f);else{if(!c)return;e.getScript(c).done(function(){var c;
g(d._proxy[a])?c=d._proxy[a].apply(b,j):i(d._proxy[a])&&(c=d._proxy[a]);h.resolve(c)}).fail(function(){h.reject("OnDemand failed to load script "+c)})}return h.promise()};b.setOptions=function(a){this.options=e.extend({},c,a)};b.resetOptions=function(){this.options=e.extend({},c,{})};b.preload=function(a){this.firstLoad(a)};b.invoke=function(a,b,c){return this.firstLoad(a,b,c)};b.use=function(a){return this.firstLoad(a)};b.register=function(a,b){if(g(b)||i(b))d._proxy[a]=b};b.registerAll=function(a){for(var b in a)a.hasOwnProperty(b)&&
this.register(b,a[b])};g=function(a){return"function"===typeof a};i=function(a){return"object"===typeof a};e.onDemand=new f(void 0)})(jQuery,window);
